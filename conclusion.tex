%/**********************************************************************/
%		結論：
%/**********************************************************************/
\chapter{結論}
\label{lbl_chptr2}

本章では，本研究のまとめと今後の展望について述べる


%/**********************************************************************/
%		イントロの章
%/**********************************************************************/



\section{まとめ}
本研究を通じて，RGBを重ね合わせる事によってエンコードされるカラーQRコードの実装と，近距離からの撮影によるデコードが可能となるシステムを構築することができた．また，カラーQRコードを入力画像としたアートQRコードの生成に関して，今回の実験で扱った画像生成手法では，開発した読み取りシステムでデコード可能な画像の生成はできなかった．

\section{今後の展望}

\subsection{カラーQRコードの読み取りシステムについて}
%本実験により，中長距離からの撮影で，カラーコードが認識できないという課題が見つかった．この課題に対する展望として，物体検出AI等を利用した画像の補正が挙げられる．本研究で行った実験では，撮影対象に対する距離に関わらず，同様のカーネルサイズを用いて，撮影画像に対する前処理を行っていた．これにより，撮影距離が離れるにつれて，撮影画像中のQRコード領域が小さくなり，処理後の画像に劣化が見られた．そこで，物体検出アルゴリズムを用いて，先にQRコード領域の推定を行い，補正画像を作成したうえで，モルフォロジー処理を適用することでカラーQRコードの検出率向上が期待される(図\ref{fig:matome_1}). このような処理は，カラーＱＲコードだけではなく，一般のQRコードの検出率を向上にも役立つものであるだろう．


本研究の評価実験より，撮影距離が中長距離になるにつれて，カラーQRコードの検出率が著しく低下するという課題が明らかとなった．この要因として，撮影距離の増加に伴い，撮影画像中におけるQRコード領域が相対的に小さくなり，モジュール（セル）サイズが縮小することが挙げられる．しかし本研究では，撮影距離に関わらず同一のカーネルサイズを用いてモルフォロジー処理を適用していたため，遠距離撮影画像に対しては過度な処理となり，セル形状の崩れや色情報の劣化を招いていたと考えられる．

第2章で述べたステゴパネルVを用いたRGBマイクロQRコードの研究においても，撮影距離に応じて適切なカーネルサイズや処理回数が存在することが示されており，本研究の結果はこの知見と整合している．すなわち，「距離に応じた画像処理パラメータの最適化」がカラーQRコード検出において重要な要素であることが示唆される．

この課題に対する有効な展望として，物体検出アルゴリズムを用いたQRコード領域の事前推定が挙げられる．まず，撮影画像からYOLOをはじめとする物体検出AIによりQRコード領域を推定・切り出し，その領域をリサイズや射影補正によって正規化した補正画像を生成する．その後，補正後画像に対してモルフォロジー処理や色抽出処理を適用することで，撮影距離に依存しない安定した前処理が可能になると考えられる(図\ref{fig:matome_1})．

この手法により，QRコード領域に対する処理スケールを実質的に一定に保つことができ，遠距離撮影時におけるセル劣化や色干渉の影響を大きく軽減できると期待される．また，本提案手法はカラーQRコードに限らず，一般のモノクロQRコードに対しても検出率向上に寄与する汎用的な前処理技術となり得る．

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\linewidth]{pics/matome_1.png}
	\caption{カラーQRコードの検出率を向上させる改善案}
	\label{fig:matome_1}
\end{figure}




\subsection{カラーQRコード入力によるアートQRコードの生成について}
%本研究で取り扱った手法では，カラーＱＲコードの読み取りシステムで検出可能なカラーアートQRコード画像を生成することができなかった．しかし，出力画像に大きく影響するという理由からcontrolnetに対する工夫は必要不可欠でる．本技術に対する展望としては，controlnetモデルの独自開発が挙げられる．インターネット上に公開されているcontrolnetモデルの多くは，safetensorと呼ばれるファイル形式をとっており，内部はバイナリのファイルとなっている．従って，ダウンロードしたモデルの解析や改変は現実的ではない．そこで開発工数は多くなるが，モデルの独自開発が必要とされると考えられる．


第5章の実験において，既存のControlNetモデルを用いた画像生成では，本研究で開発したカラーQRコード読み取りシステムによって安定して検出可能な「カラーアートQRコード画像」を生成することはできなかった．これは，既存のControlNetモデルが，一般画像の構造保持や輪郭保持を目的として学習されており，QRコードのような「厳密なセル構造」や「色の二値性」を保持することを想定していないことが主な要因であると考えられる．

実験結果より，ControlNetの強度を上げることでQRコード形状は保持されるがイラスト性が失われ，逆に強度を下げるとイラスト性は向上するがQRコードとしての可読性が失われるというトレードオフの関係が確認された．この結果は，「QRコードの構造的制約」と「生成AIによる自然画像生成」の間に本質的なギャップが存在することを示している．

この課題に対する展望として，QRコード専用のControlNetモデルの独自開発が挙げられる．現在インターネット上で公開されているControlNetモデルの多くは safetensors 形式のバイナリファイルであり，内部構造の解析や改変は現実的ではない．そのため，カラーQRコードのセル構造，色分布特性，および誤り訂正特性を学習データとして用いた，専用のControlNetの学習が必要になると考えられる．

%具体的には，
%
%入力：カラーQRコード画像
%
%出力：QRコードのセル配置を保持したままイラスト化された画像
%
%損失関数：通常の生成損失に加えて，QRコード復号誤差を評価指標に含める
%
%といった学習設計を行うことで，「見た目はイラストでありながら確実に読み取り可能なQRコード画像」を生成可能なモデルの実現が期待される．
%
%このようなモデルは，広告媒体やデジタルサイネージにおいて，デザイン性と機能性を両立した新しい二次元コード表現を実現する基盤技術となり得る